PART=TM4C123GH6PM
CFLAGSgcc=-DTARGET_IS_TM4C123_RB1
include .ti_makedefs
ROS_ECHRONOS_DIR=libs/ros_echronos
IPATH+=$(ROS_ECHRONOS_DIR)/include

MODULE_BUILD_DIR=$(ECHRONOS_BUILD)/$(MODULE_NAME)-echronos
ROS_BUILD_DIR=$(MODULE_BUILD_DIR)/lib/ros_echronos

$(ROS_BUILD_DIR):
	mkdir -p ${@}

$(ROS_BUILD_DIR)/%.opp: $(ROS_ECHRONOS_DIR)/%.cpp $(ROS_BUILD_DIR) $(MODULE_ECHRONOS)
	$(BUILD_PRINT)
	${CC} ${CPPFLAGS} \
		-I$(shell echo ${@} | sed 's/lib\/ros_echronos\/.*\.opp//g') \
		-I$(<D) \
		-D${COMPILER} -o ${@} ${<}


$(ROS_BUILD_DIR)/ros.opp: $(ROS_ECHRONOS_DIR)/ros.cpp
$(ROS_BUILD_DIR)/ros.opp: $(ROS_ECHRONOS_DIR)/ros.cpp

ros_echronos: $(ROS_BUILD_DIR)/ros.opp $(ROS_BUILD_DIR)/Node_Handle.opp